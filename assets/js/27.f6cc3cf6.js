(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{420:function(e,t,a){"use strict";a.r(t);var s=a(5),n=Object(s.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"updates-and-troubleshooting"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#updates-and-troubleshooting"}},[e._v("#")]),e._v(" Updates and Troubleshooting")]),e._v(" "),a("h3",{attrs:{id:"upgrading-testnet"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#upgrading-testnet"}},[e._v("#")]),e._v(" Upgrading Testnet")]),e._v(" "),a("p",[e._v("These instructions are for full nodes that have ran on previous testnets and would like to upgrade to the latest testnet.")]),e._v(" "),a("h4",{attrs:{id:"reset-data"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#reset-data"}},[e._v("#")]),e._v(" Reset data")]),e._v(" "),a("p",[e._v("First, remove the outdated files and reset the data.")]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("rm")]),e._v(" ~/.terra/config/genesis.json\n"),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("rm")]),e._v(" ~/.terra/config/addrbook.json\nterrad unsafe-reset-all\n")])])]),a("p",[e._v("Your node is now in a pristine state while keeping the original "),a("code",[e._v("priv_validator.json")]),e._v(" and "),a("code",[e._v("config.toml")]),e._v(". If you had any sentry nodes or full nodes setup before, your node will still try to connect to them, but may fail if they haven't also been upgraded.")]),e._v(" "),a("div",{staticClass:"custom-block danger"},[a("p",{staticClass:"custom-block-title"},[e._v("WARNING")]),e._v(" "),a("p",[e._v("Make sure that every node has a unique "),a("code",[e._v("priv_validator.json")]),e._v(". Do not copy the "),a("code",[e._v("priv_validator.json")]),e._v(" from an old node to multiple new nodes. Running two nodes with the same "),a("code",[e._v("priv_validator.json")]),e._v(" will cause you to double sign.")])]),e._v(" "),a("h2",{attrs:{id:"software-upgrade"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#software-upgrade"}},[e._v("#")]),e._v(" Software upgrade")]),e._v(" "),a("p",[e._v("Now it is time to upgrade the software. Go to the project directory, and run:")]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("git")]),e._v(" checkout master "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("&&")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("git")]),e._v(" pull\n"),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("make")]),e._v("\n")])])]),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[e._v("NOTE")]),e._v(" "),a("p",[e._v("If you have issues at this step, please check that you have the latest stable version of GO installed.")])]),e._v(" "),a("p",[e._v("Note we use "),a("code",[e._v("master")]),e._v(" here since it contains the latest stable release. See the "),a("a",{attrs:{href:"https://github.com/terra-money/testnet",target:"_blank",rel:"noopener noreferrer"}},[e._v("testnet repo"),a("OutboundLink")],1),e._v(" for details on which version is needed for which testnet, and the "),a("a",{attrs:{href:"https://github.com/terra-money/core/releases",target:"_blank",rel:"noopener noreferrer"}},[e._v("Terra Core release page"),a("OutboundLink")],1),e._v(" for details on each release. Your full node has been cleanly upgraded!")]),e._v(" "),a("h2",{attrs:{id:"exporting-state"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#exporting-state"}},[e._v("#")]),e._v(" Exporting state")]),e._v(" "),a("p",[e._v("Terra can dump the entire application state to a JSON file, which could be useful for manual analysis and can also be used as the genesis file of a new network.")]),e._v(" "),a("p",[e._v("Export state with:")]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[e._v("terrad "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("export")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),e._v("filename"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v(".json\n")])])]),a("p",[e._v("You can also export state from a particular height (at the end of processing the block of that height):")]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[e._v("terrad "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("export")]),e._v(" --height "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),e._v("height"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),e._v("filename"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v(".json\n")])])]),a("p",[e._v("If you plan to start a new network from the exported state, export with the "),a("code",[e._v("--for-zero-height")]),e._v(" flag:")]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[e._v("terrad "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("export")]),e._v(" --height "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),e._v("height"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v(" --for-zero-height "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),e._v("filename"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v(".json\n")])])]),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[e._v("NOTE")]),e._v(" "),a("p",[e._v("For more information on seeds and peers, visit "),a("a",{attrs:{href:"https://github.com/tendermint/tendermint/blob/master/docs/tendermint-core/using-tendermint.md#peers",target:"_blank",rel:"noopener noreferrer"}},[e._v("Tendermint's documentation"),a("OutboundLink")],1),e._v(".")])]),e._v(" "),a("h1",{attrs:{id:"additional-settings"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#additional-settings"}},[e._v("#")]),e._v(" Additional Settings")]),e._v(" "),a("h3",{attrs:{id:"seed-mode"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#seed-mode"}},[e._v("#")]),e._v(" "),a("code",[e._v("seed_mode")])]),e._v(" "),a("p",[e._v("In seed mode, a node continuously crawls the network for peers, and upon incoming connection shares some peers and disconnects.")]),e._v(" "),a("div",{staticClass:"language-toml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-toml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Seed mode, in which node constantly crawls the network and looks for")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# peers. If another node asks it for addresses, it responds and disconnects.")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Does not work if the peer-exchange reactor is disabled.")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token key property"}},[e._v("seed_mode")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("=")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[e._v("true")]),e._v("\n")])])]),a("h3",{attrs:{id:"seeds"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#seeds"}},[e._v("#")]),e._v(" "),a("code",[e._v("seeds")])]),e._v(" "),a("p",[e._v("For advanced settings, visit "),a("a",{attrs:{href:"#define-seed-nodes"}},[e._v("Define seed nodes")]),e._v(".\nTo manually identify seed nodes, edit the following dsetting in "),a("code",[e._v("config.toml")]),e._v(".")]),e._v(" "),a("div",{staticClass:"language-toml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-toml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Comma separated list of seed nodes to connect to")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token key property"}},[e._v("seeds")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("=")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"id100000000000000000000000000000000@1.2.3.4:26656,id200000000000000000000000000000000@2.3.4.5:4444"')]),e._v("\n")])])]),a("h3",{attrs:{id:"persistent-peers"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#persistent-peers"}},[e._v("#")]),e._v(" "),a("code",[e._v("persistent_peers")])]),e._v(" "),a("p",[e._v("The nodes you specify are the trusted persistent peers that can help anchor your node in the p2p network. If the connection fails, they are dialed and automatically redialed for 24 hours. The automatic redial function uses exponential backoff and stops after 24 hours of trying to connect.")]),e._v(" "),a("p",[e._v("If the value of "),a("code",[e._v("persistent_peers_max_dial_period")]),e._v(" is more than zero, the pause between each call to each persistent peer will not exceed "),a("code",[e._v("persistent_peers_max_dial_period")]),e._v(" during exponential backoff, and the automatic redial process continues.")]),e._v(" "),a("div",{staticClass:"language-toml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-toml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Comma separated list of nodes to keep persistent connections to")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token key property"}},[e._v("persistent_peers")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("=")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"id100000000000000000000000000000000@1.2.3.4:26656,id200000000000000000000000000000000@2.3.4.5:26656"')]),e._v("\n")])])]),a("h3",{attrs:{id:"rosetta"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#rosetta"}},[e._v("#")]),e._v(" Rosetta")]),e._v(" "),a("p",[e._v("Integrate Terra with Coinbase via the Rosetta API. Rosetta is an open-source API that organizes blockchain data into a standardized format, making it easy for developers to build cross-chain applications. Instead of creating specific code for each chain, Rosetta allows different blockchains to integrate into any exchange that uses Rosetta API.")]),e._v(" "),a("p",[e._v("For more information, visit the "),a("a",{attrs:{href:"https://www.rosetta-api.org/docs/welcome.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Rosetta docs site"),a("OutboundLink")],1),e._v(".")])])}),[],!1,null,null,null);t.default=n.exports}}]);